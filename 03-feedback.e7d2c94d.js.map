{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAO,CACTC,MAAOC,SAASC,cAAc,uBAC9BC,SAAWF,SAASC,cAAc,4BAClCE,KAAOH,SAASC,cAAc,mBAE5BG,EAAc,sBAChBC,EAAW,GAEfP,EAAKK,KAAKG,iBAAiB,SAAQ,EAAAV,EAAAW,WAKnC,SAAuBC,GACnBH,EAASG,EAAIC,OAAOC,MAAQF,EAAIC,OAAOE,MACvCC,aAAaC,QAAQT,EAAaU,KAAKC,UAAUV,G,GAPM,MAC3DP,EAAKK,KAAKG,iBAAiB,UAS3B,SAAsBE,GAGlB,GAFAA,EAAIQ,iBAEkC,KAAlCR,EAAIS,cAAcC,MAAMP,OAAoD,KAApCH,EAAIS,cAAcE,QAAQR,MAClES,MAAM,uCACH,CACH,IAAMC,EAAW,IAAIC,SAASd,EAAIS,eAC5BM,EAAa,GACnBF,EAASG,SAAQ,SAACb,EAAOD,GACvBa,EAAWb,GAAQC,C,IAGrBc,QAAQC,IAAIH,GACZf,EAAIS,cAAcU,QAClBf,aAAagB,WAAWxB,E,KAKhC,WACE,IAAMyB,EAAejB,aAAakB,QAAQ1B,GACpC2B,EAAgBjB,KAAKkB,MAAMH,GAClC,GAAGA,EACA,IAAK,IAAMI,KAAOF,EACVjC,EAAKK,KAAKF,cAAc,SAAaiC,OAAJD,EAAI,MAAItB,MAAQoB,EAAcE,GAC/D5B,EAAS,GAAO6B,OAAJD,IAASnC,EAAKK,KAAKF,cAAc,SAAaiC,OAAJD,EAAI,MAAItB,K,CAhC1EwB,E","sources":["src/js/03-feedback.js"],"sourcesContent":["import { throttle } from \"lodash\";\n\nconst refs = {\n    input: document.querySelector('input[name=\"email\"]'),\n    textarea : document.querySelector('textarea[name=\"message\"]'),\n    form : document.querySelector('.feedback-form'),\n};\nconst STORAGE_KEY = 'feedback-form-state';\nlet formData = {};\n\nrefs.form.addEventListener('input',throttle(onInputChange, 500));\nrefs.form.addEventListener('submit', onFormSubmit);\n\npopulateMessageOutput();\n\nfunction onInputChange(evt){\n    formData[evt.target.name] = evt.target.value;\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n}\n\nfunction onFormSubmit(evt){\n    evt.preventDefault();\n\n    if (evt.currentTarget.email.value === '' || evt.currentTarget.message.value === ''){\n        alert('всі поля повинні бути заповнені');   \n    } else { \n        const formData = new FormData(evt.currentTarget);\n        const objectData = {};\n        formData.forEach((value, name) => {\n          objectData[name] = value;\n        });\n\n        console.log(objectData);\n        evt.currentTarget.reset();\n        localStorage.removeItem(STORAGE_KEY);\n}\n}\n\n\nfunction populateMessageOutput () {\n  const savedMessage = localStorage.getItem(STORAGE_KEY);\n  const parsedMessage = JSON.parse(savedMessage);\n if(savedMessage){\n    for (const key in parsedMessage) {\n            refs.form.querySelector(`[name=${key}]`).value = parsedMessage[key];\n            formData[`${key}`] = refs.form.querySelector(`[name=${key}]`).value;\n        };\n  };\n}\n"],"names":["$1WSnx","parcelRequire","$b00c40859be242c5$var$refs","input","document","querySelector","textarea","form","$b00c40859be242c5$var$STORAGE_KEY","$b00c40859be242c5$var$formData","addEventListener","throttle","evt","target","name","value","localStorage","setItem","JSON","stringify","preventDefault","currentTarget","email","message","alert","formData1","FormData","objectData","forEach","console","log","reset","removeItem","savedMessage","getItem","parsedMessage","parse","key","concat","$b00c40859be242c5$var$populateMessageOutput"],"version":3,"file":"03-feedback.e7d2c94d.js.map"}