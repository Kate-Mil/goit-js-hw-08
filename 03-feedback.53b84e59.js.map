{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAO,CACTC,MAAOC,SAASC,cAAc,uBAC9BC,SAAWF,SAASC,cAAc,4BAClCE,KAAOH,SAASC,cAAc,mBAGlC,IAAIG,EAAW,GAEfN,EAAKK,KAAKE,iBAAiB,SAAQ,EAAAT,EAAAU,WAKnC,SAAuBC,GACnBH,EAASG,EAAIC,OAAOC,MAAQF,EAAIC,OAAOE,MACvCC,aAAaC,QAVG,sBAUkBC,KAAKC,UAAUV,G,GAPM,MAC3DN,EAAKK,KAAKE,iBAAiB,UAS3B,SAAsBE,GAGlB,GAFAA,EAAIQ,iBAEkC,KAAlCR,EAAIS,cAAcC,MAAMP,OAAoD,KAApCH,EAAIS,cAAcE,QAAQR,MAClES,MAAM,uCACH,CACH,MAAMC,EAAW,IAAIC,SAASd,EAAIS,eAC5BM,EAAa,GACnBF,EAASG,SAAQ,CAACb,EAAOD,KACvBa,EAAWb,GAAQC,CAAK,IAG1Bc,QAAQC,IAAIH,GACZf,EAAIS,cAAcU,QAClBf,aAAagB,WA3BD,sB,KAgCpB,WACE,MAAMC,EAAejB,aAAakB,QAjChB,uBAkCZC,EAAgBjB,KAAKkB,MAAMH,GAClC,GAAGA,EACA,IAAK,MAAMI,KAAOF,EACVhC,EAAKK,KAAKF,cAAc,SAAS+B,MAAQtB,MAAQoB,EAAcE,GAC/D5B,EAAS,GAAG4B,KAASlC,EAAKK,KAAKF,cAAc,SAAS+B,MAAQtB,K,CAhC1EuB","sources":["src/js/03-feedback.js"],"sourcesContent":["import { throttle } from \"lodash\";\n\nconst refs = {\n    input: document.querySelector('input[name=\"email\"]'),\n    textarea : document.querySelector('textarea[name=\"message\"]'),\n    form : document.querySelector('.feedback-form'),\n};\nconst STORAGE_KEY = 'feedback-form-state';\nlet formData = {};\n\nrefs.form.addEventListener('input',throttle(onInputChange, 500));\nrefs.form.addEventListener('submit', onFormSubmit);\n\npopulateMessageOutput();\n\nfunction onInputChange(evt){\n    formData[evt.target.name] = evt.target.value;\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n}\n\nfunction onFormSubmit(evt){\n    evt.preventDefault();\n\n    if (evt.currentTarget.email.value === '' || evt.currentTarget.message.value === ''){\n        alert('всі поля повинні бути заповнені');   \n    } else { \n        const formData = new FormData(evt.currentTarget);\n        const objectData = {};\n        formData.forEach((value, name) => {\n          objectData[name] = value;\n        });\n\n        console.log(objectData);\n        evt.currentTarget.reset();\n        localStorage.removeItem(STORAGE_KEY);\n}\n}\n\n\nfunction populateMessageOutput () {\n  const savedMessage = localStorage.getItem(STORAGE_KEY);\n  const parsedMessage = JSON.parse(savedMessage);\n if(savedMessage){\n    for (const key in parsedMessage) {\n            refs.form.querySelector(`[name=${key}]`).value = parsedMessage[key];\n            formData[`${key}`] = refs.form.querySelector(`[name=${key}]`).value;\n        };\n  };\n}\n"],"names":["$kEUo3","parcelRequire","$945622fd0f572e60$var$refs","input","document","querySelector","textarea","form","$945622fd0f572e60$var$formData","addEventListener","throttle","evt","target","name","value","localStorage","setItem","JSON","stringify","preventDefault","currentTarget","email","message","alert","formData1","FormData","objectData","forEach","console","log","reset","removeItem","savedMessage","getItem","parsedMessage","parse","key","$945622fd0f572e60$var$populateMessageOutput"],"version":3,"file":"03-feedback.53b84e59.js.map"}